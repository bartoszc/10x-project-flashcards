---
import Layout from "../../layouts/Layout.astro";
import { NewPasswordForm } from "../../components/auth/NewPasswordForm";

// This page is accessed via a link from email which contains a hash fragment with the token.
// Supabase client-side will handle the session recovery, but we can't fully validate server-side here easily
// without a redirect dance (access_token is in hash, not cookies).
// So we render the form and let the client component handle the token extraction and validation.

// However, if the user navigates here manually without a token (or valid session),
// the client component will show an error.
---

<Layout title="Ustaw nowe hasło | 10x Cards">
  <main class="min-h-screen flex items-center justify-center bg-background px-4 py-12">
    <div class="w-full max-w-md space-y-8">
      <!-- Header -->
      <div class="text-center space-y-2">
        <h1 class="text-3xl font-bold tracking-tight">Ustaw nowe hasło</h1>
        <p class="text-muted-foreground">Wprowadź nowe, bezpieczne hasło dla swojego konta.</p>
      </div>

      <!-- Form Card -->
      <div class="bg-card border border-border rounded-lg p-6 shadow-sm space-y-6">
        <NewPasswordForm client:load />
      </div>
    </div>
  </main>
</Layout>
